---
// Decorative animated star canvas â€” no props, purely visual
---

<canvas class="star-canvas" aria-hidden="true" role="presentation"></canvas>

<style>
  .star-canvas {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    display: block;
  }
</style>

<script>
  (() => {
    const canvas = document.querySelector<HTMLCanvasElement>('.star-canvas');
    if (!canvas) return;
    const ctx = canvas.getContext('2d');
    if (!ctx) return;

    interface Star {
      x: number;
      y: number;
      radius: number;
      alpha: number;
      alphaDir: number;
      vy: number;
    }

    const COUNT = 180;
    let stars: Star[] = [];
    let raf = 0;
    let w = 0;
    let h = 0;

    function resize() {
      w = canvas!.width = canvas!.offsetWidth;
      h = canvas!.height = canvas!.offsetHeight;
    }

    function makeStar(randomY = true): Star {
      return {
        x: Math.random() * w,
        y: randomY ? Math.random() * h : h + 2,
        radius: Math.random() * 1.4 + 0.2,
        alpha: Math.random(),
        alphaDir: Math.random() < 0.5 ? 1 : -1,
        vy: -(Math.random() * 0.1 + 0.03),
      };
    }

    function init() {
      resize();
      stars = Array.from({ length: COUNT }, () => makeStar(true));
    }

    function frame() {
      ctx!.clearRect(0, 0, w, h);

      for (const s of stars) {
        s.alpha += 0.004 * s.alphaDir;
        if (s.alpha >= 1) { s.alpha = 1; s.alphaDir = -1; }
        if (s.alpha <= 0) { s.alpha = 0; s.alphaDir = 1; }

        s.y += s.vy;
        if (s.y < -2) {
          Object.assign(s, makeStar(false));
        }

        ctx!.beginPath();
        ctx!.arc(s.x, s.y, s.radius, 0, Math.PI * 2);
        ctx!.fillStyle = `rgba(255,255,255,${s.alpha.toFixed(3)})`;
        ctx!.fill();
      }

      raf = requestAnimationFrame(frame);
    }

    const io = new IntersectionObserver((entries) => {
      const entry = entries[0];
      if (!entry) return;
      if (entry.isIntersecting) {
        raf = requestAnimationFrame(frame);
      } else {
        cancelAnimationFrame(raf);
      }
    });

    io.observe(canvas);
    init();
    window.addEventListener('resize', resize, { passive: true });
  })();
</script>
